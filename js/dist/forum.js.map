{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://flarum-group-expiration/webpack/bootstrap","webpack://flarum-group-expiration/webpack/runtime/compat get default export","webpack://flarum-group-expiration/webpack/runtime/define property getters","webpack://flarum-group-expiration/webpack/runtime/hasOwnProperty shorthand","webpack://flarum-group-expiration/external root \"flarum.core.compat['forum/app']\"","webpack://flarum-group-expiration/external root \"flarum.core.compat['common/extend']\"","webpack://flarum-group-expiration/external root \"flarum.core.compat['forum/utils/UserControls']\"","webpack://flarum-group-expiration/external root \"flarum.core.compat['common/components/Button']\"","webpack://flarum-group-expiration/external root \"flarum.core.compat['forum/components/UserCard']\"","webpack://flarum-group-expiration/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://flarum-group-expiration/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://flarum-group-expiration/external root \"flarum.core.compat['common/components/Modal']\"","webpack://flarum-group-expiration/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://flarum-group-expiration/./src/forum/components/ExpirationModal.js","webpack://flarum-group-expiration/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://flarum-group-expiration/./src/forum/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/UserControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserCard'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\nimport app from 'flarum/forum/app';\n\nexport default class ExpirationModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.user = this.attrs.user;\n    \n    // è·å–åç«¯ä¼ æ¥çš„è¿‡æœŸæ—¶é—´æ˜ å°„è¡¨\n    this.expirations = this.user.attribute('groupExpirations') || {};\n\n    this.groupId = Stream('');\n    this.days = Stream(''); // åªä¿ç•™å¤©æ•°ä½œä¸ºè¾“å…¥\n    \n    // ç•Œé¢æ˜¾ç¤ºç”¨çš„æµ\n    this.currentExpirationLabel = Stream('è¯·é€‰æ‹©ç¾¤ç»„æŸ¥çœ‹');\n    this.newExpirationLabel = Stream('-'); \n    \n    // æœ€ç»ˆæäº¤ç»™åç«¯çš„æ•°æ®\n    this.computedDate = ''; \n  }\n\n  className() {\n    return 'ExpirationModal Modal--small';\n  }\n\n  title() {\n    return 'å»¶é•¿ç¾¤ç»„æœ‰æ•ˆæœŸ';\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        {/* 1. é€‰æ‹©ç¾¤ç»„ */}\n        <div className=\"Form-group\">\n          <label>é€‰æ‹©ç¾¤ç»„</label>\n          <select\n            className=\"FormControl\"\n            value={this.groupId()}\n            onchange={e => this.onGroupChange(e.target.value)}\n          >\n            <option value=\"\" disabled>è¯·é€‰æ‹©...</option>\n            {app.store.all('groups')\n              .filter(g => g.id() !== '2' && g.id() !== '3')\n              .map(group => (\n                <option key={group.id()} value={group.id()}>\n                  {group.namePlural()}\n                </option>\n              ))}\n          </select>\n        </div>\n\n        {/* 2. ä¿¡æ¯å±•ç¤ºåŒºï¼šå½“å‰çŠ¶æ€ */}\n        <div className=\"Form-group\" style=\"background: #f9f9f9; padding: 10px; border-radius: 5px; border: 1px solid #eee;\">\n            <label style=\"font-size: 12px; color: #666; margin-bottom: 2px;\">å½“å‰æœ‰æ•ˆæœŸ</label>\n            <div style=\"font-weight: bold; color: #333;\">\n                {this.currentExpirationLabel()}\n            </div>\n        </div>\n\n        {/* 3. æ“ä½œåŒºï¼šå……å€¼å¤©æ•° */}\n        <div className=\"Form-group\">\n          <label>å¢åŠ æ—¶é•¿ (å¤©æ•°)</label>\n          <input\n            type=\"number\"\n            className=\"FormControl\"\n            placeholder=\"ä¾‹å¦‚: 30\"\n            value={this.days()}\n            oninput={e => this.calcNewDate(e.target.value)}\n            disabled={!this.groupId()} // æ²¡é€‰ç¾¤ç»„ä¸èƒ½å¡«\n          />\n          <div className=\"helpText\">è¾“å…¥è´Ÿæ•°å¯ä»¥å‡å°‘æ—¶é•¿ã€‚</div>\n        </div>\n\n        {/* 4. é¢„è§ˆåŒºï¼šç»“æœé¢„è§ˆ */}\n        <div className=\"Form-group\" style=\"background: #e8f3ff; padding: 10px; border-radius: 5px; border: 1px solid #d0e3f5;\">\n            <label style=\"font-size: 12px; color: #4d698e; margin-bottom: 2px;\">é¢„è®¡æ–°æœ‰æ•ˆæœŸ</label>\n            <div style=\"font-weight: bold; color: #2b4566; font-size: 1.1em;\">\n                {this.newExpirationLabel()}\n            </div>\n        </div>\n\n        <div className=\"Form-group\">\n          {Button.component({\n            type: 'submit',\n            className: 'Button Button--primary',\n            disabled: !this.groupId() || !this.days(),\n            loading: this.loading\n          }, 'ç¡®è®¤ä¿å­˜')}\n        </div>\n      </div>\n    );\n  }\n\n  // åˆ‡æ¢ç¾¤ç»„æ—¶\n  onGroupChange(groupId) {\n    this.groupId(groupId);\n    \n    // æ›´æ–°â€œå½“å‰æœ‰æ•ˆæœŸâ€æ˜¾ç¤º\n    const existingDateStr = this.expirations[groupId];\n    if (existingDateStr) {\n        const d = new Date(existingDateStr);\n        // this.currentExpirationLabel(d.toLocaleDateString() + ' ' + d.toLocaleTimeString());\n        // åªæ˜¾ç¤ºæ—¥æœŸ\n        this.currentExpirationLabel(d.toLocaleDateString());\n    } else {\n        this.currentExpirationLabel('å½“å‰æ— æœ‰æ•ˆæœŸ (å°†ä»ç°åœ¨å¼€å§‹è®¡ç®—)');\n    }\n\n    // å¦‚æœå¤©æ•°æ¡†é‡Œæœ‰æ•°å­—ï¼Œé‡æ–°è®¡ç®—é¢„è§ˆ\n    this.calcNewDate(this.days());\n  }\n\n  // è®¡ç®—æ–°çš„æ—¥æœŸï¼ˆä»…ç”¨äºé¢„è§ˆå’Œæäº¤ï¼‰\n  calcNewDate(days) {\n    this.days(days);\n    \n    if (!days || !this.groupId()) {\n      this.newExpirationLabel('-');\n      this.computedDate = '';\n      return;\n    }\n\n    // 1. ç¡®å®šåŸºå‡†æ—¶é—´\n    const now = new Date();\n    let baseDate = now;\n    \n    // å¦‚æœæœ‰ç°æœ‰è®°å½•ï¼Œä¸”åœ¨æœªæ¥ï¼Œåˆ™ä»¥ç°æœ‰è®°å½•ä¸ºåŸºå‡†\n    if (this.expirations[this.groupId()]) {\n        const existing = new Date(this.expirations[this.groupId()]);\n        if (existing > now) {\n            baseDate = existing;\n        }\n    }\n\n    // 2. åŠ ä¸Šå¤©æ•°\n    const targetDate = new Date(baseDate.getTime());\n    targetDate.setDate(targetDate.getDate() + parseInt(days));\n\n    // 3. æ›´æ–°é¢„è§ˆæ–‡å­—\n    this.newExpirationLabel(targetDate.toLocaleDateString()); // æ˜¾ç¤ºå‹å¥½æ ¼å¼\n    \n    // 4. ä¿å­˜ ISO æ ¼å¼ç”¨äºæäº¤ (åç«¯é€»è¾‘éœ€è¦è¿™ä¸ª)\n    // å³ä½¿åç«¯ç°åœ¨åšå·®å€¼è®¡ç®—ï¼Œæˆ‘ä»¬å‘ç»™å®ƒç®—å¥½çš„æ—¥æœŸä¹Ÿæ˜¯æœ€å®‰å…¨çš„ï¼Œ\n    // å› ä¸ºè¿™ç¬¦åˆ Controller é‡Œ $inputDate->isPast() çš„åˆ¤æ–­é€»è¾‘ã€‚\n    this.computedDate = targetDate.toISOString();\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n    this.loading = true;\n\n    // æˆ‘ä»¬è¿™é‡Œè¦ç¨å¾®â€œæ¬ºéª—â€ä¸€ä¸‹åç«¯é€»è¾‘\n    // ä¸ºäº†é…åˆä¹‹å‰çš„ Controller (å®ƒè®¡ç®— InputDate - Now = Duration)ï¼Œ\n    // æˆ‘ä»¬éœ€è¦æŠŠå‰ç«¯ç®—å‡ºæ¥çš„â€œæ–°æ—¥æœŸâ€å‘ç»™å®ƒã€‚\n    \n    // ä½†æ˜¯ï¼Controller çš„é€»è¾‘æ˜¯ï¼šæ–°æ—¥æœŸ = Max(ç°æœ‰, Now) + (Input - Now)\n    // è¿™ä¼šå¯¼è‡´åŒé‡è®¡ç®—ã€‚\n    \n    // ä¸ºäº†ä¸æ”¹åŠ¨åç«¯å¤æ‚çš„é€»è¾‘ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼š\n    // å‰ç«¯ç›´æ¥å‘ä¸€ä¸ªæ—¥æœŸï¼Œè®©åç«¯ç®—å‡ºå·®å€¼å³å¯ã€‚\n    // æˆ‘ä»¬åœ¨è¿™ä¸ª calcNewDate é‡Œç®—å‡ºçš„ targetDate å…¶å®å°±æ˜¯ resultã€‚\n    // ä½†åç«¯ä¼šç”¨ (Target - Now) ä½œä¸ºå¢é‡ã€‚\n    \n    // è®©æˆ‘ä»¬å†çœ‹ä¸€çœ¼åç«¯ä»£ç ï¼š\n    // $secondsToAdd = $inputDate->isPast() ? 0 : $now->diffInSeconds($inputDate);\n    // $finalDate = $baseDate->copy()->addSeconds($secondsToAdd);\n    \n    // è¿™æ˜¯ä¸€ä¸ªå·§å¦™çš„æ•°å­¦é¢˜ï¼š\n    // å¦‚æœæˆ‘ä»¬å‘ç»™åç«¯çš„æ˜¯ \"Now + 30 days\" çš„æ—¥æœŸã€‚\n    // åç«¯ç®—å‡º secondsToAdd = 30 daysã€‚\n    // åç«¯ baseDate = Existing Dateã€‚\n    // Result = Existing Date + 30 daysã€‚\n    // å®Œç¾ï¼é€»è¾‘é€šé¡ºã€‚\n    \n    // æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦æ„é€ ä¸€ä¸ª \"åŸºäºç°åœ¨ + days\" çš„æ—¥æœŸå‘ç»™åç«¯å³å¯\n    // è€Œä¸æ˜¯ \"åŸºäº Existing + days\" çš„æ—¥æœŸã€‚\n    \n    const now = new Date();\n    const submissionDate = new Date(now.getTime());\n    submissionDate.setDate(submissionDate.getDate() + parseInt(this.days()));\n\n    app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/group-expiration',\n      body: {\n        userId: this.user.id(),\n        groupId: this.groupId(),\n        expirationDate: submissionDate.toISOString() // å‘é€åŸºäºä»Šå¤©çš„å¢é‡æ—¥æœŸ\n      }\n    }).then(() => {\n      this.hide();\n      app.alerts.show({ type: 'success' }, 'è®¾ç½®æˆåŠŸï¼');\n      window.location.reload();\n    }).catch(() => {\n      this.loading = false;\n      m.redraw();\n    });\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport UserControls from 'flarum/forum/utils/UserControls';\nimport Button from 'flarum/common/components/Button';\nimport UserCard from 'flarum/forum/components/UserCard'; // ğŸ‘ˆ æ–°å¢å¼•å…¥\nimport icon from 'flarum/common/helpers/icon'; // ğŸ‘ˆ æ–°å¢å¼•å…¥\nimport fullTime from 'flarum/common/helpers/fullTime'; // ğŸ‘ˆ æ–°å¢å¼•å…¥ï¼šç”¨äºæ ¼å¼åŒ–æ—¶é—´\nimport ExpirationModal from './components/ExpirationModal';\n\napp.initializers.add('hertz-dev-group-expiration', () => {\n\n  // ============================\n  // 1. ç°æœ‰çš„åŠŸèƒ½ï¼šæ·»åŠ â€œè®¾ç½®â€æŒ‰é’®\n  // ============================\n  extend(UserControls, 'userControls', function(items, user) {\n    const currentUser = app.session.user;\n    if (!currentUser) return;\n\n    const canEdit = user.attribute('canSetGroupExpiration');\n\n    if (!canEdit) return;\n\n    items.add('expiration', Button.component({\n      icon: 'fas fa-clock',\n      onclick: () => app.modal.show(ExpirationModal, { user: user }),\n    }, app.translator.trans('hertz-dev-group-expiration.forum.user_controls.edit_button')));\n    // â†‘ å»ºè®®è¿™é‡Œä¹Ÿæ¢æˆç¿»è¯‘ keyï¼Œå¦‚æœæš‚æ—¶æ²¡æœ‰ï¼Œä¿ç•™ä½ åŸæ¥çš„ä¸­æ–‡å­—ç¬¦ä¸² 'è®¾ç½®ç¾¤ç»„è¿‡æœŸæ—¶é—´' ä¹Ÿå¯ä»¥\n  });\n\n  // ============================\n  // 2. æ–°å¢åŠŸèƒ½ï¼šåœ¨ç”¨æˆ·å¡ç‰‡æ˜¾ç¤ºåˆ°æœŸæ—¶é—´\n  // ============================\n  extend(UserCard.prototype, 'infoItems', function(items) {\n    const user = this.attrs.user;\n\n    // è·å–åç«¯ä¼ æ¥çš„ groupExpiration å±æ€§\n    // å¦‚æœæ²¡æœ‰æƒé™æŸ¥çœ‹ï¼Œåç«¯ä¸ä¼šè¿”å›è¿™ä¸ªå­—æ®µï¼Œè¿™é‡Œå°±æ˜¯ undefinedï¼Œé€»è¾‘è‡ªåŠ¨è·³è¿‡\n    const expiration = user.attribute('groupExpiration');\n\n    if (expiration) {\n      items.add('groupExpiration', m('span', { className: 'UserCard-group-expiration' }, [\n        icon('fas fa-hourglass-half'), // å›¾æ ‡ï¼Œå¯ä»¥è‡ªå·±æ¢\n        ' ',\n        // è¿™é‡Œä½¿ç”¨ç¿»è¯‘æ–‡ä»¶ï¼Œæ ¼å¼ä¸º \"ç¾¤ç»„åˆ°æœŸï¼š{date}\"\n        app.translator.trans('hertz-dev-group-expiration.forum.user_card.expiration_label', {\n          // date: fullTime(expiration)\n          date: expiration.split('T')[0]\n        })\n      ]));\n    }\n  });\n\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","ExpirationModal","_Modal","apply","arguments","create","constructor","_proto","oninit","vnode","this","user","attrs","expirations","attribute","groupId","Stream","days","currentExpirationLabel","newExpirationLabel","computedDate","className","title","content","_this","m","value","onchange","onGroupChange","target","disabled","app","all","filter","g","id","map","group","namePlural","style","type","placeholder","oninput","calcNewDate","Button","loading","existingDateStr","Date","toLocaleDateString","now","baseDate","existing","targetDate","getTime","setDate","getDate","parseInt","toISOString","onsubmit","_this2","preventDefault","submissionDate","method","url","body","userId","expirationDate","then","hide","show","window","location","reload","redraw","Modal","add","extend","UserControls","items","icon","onclick","trans","UserCard","expiration","date","split"],"ignoreList":[],"sourceRoot":""}